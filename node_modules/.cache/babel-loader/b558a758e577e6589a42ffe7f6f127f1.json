{"ast":null,"code":"import _classCallCheck from \"/Users/rifkiachmads/Documents/kuliah/apap/tutorial10/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/rifkiachmads/Documents/kuliah/apap/tutorial10/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/rifkiachmads/Documents/kuliah/apap/tutorial10/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/rifkiachmads/Documents/kuliah/apap/tutorial10/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/rifkiachmads/Documents/kuliah/apap/tutorial10/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/rifkiachmads/Documents/kuliah/apap/tutorial10/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/rifkiachmads/Documents/kuliah/apap/tutorial10/src/screens/TambahHasilLab.jsx\";\nimport React from 'react';\nimport { Loading } from '../components/Loading';\nimport { FormTambahHasilLab } from '../containers/FormTambahHasilLab';\nimport { Appointment } from '../utils/Appointment';\nexport var TambahHasilLab =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(TambahHasilLab, _React$Component);\n\n  function TambahHasilLab(props) {\n    var _this;\n\n    _classCallCheck(this, TambahHasilLab);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TambahHasilLab).call(this, props));\n    _this.state = {\n      loading: true,\n      pasien: {}\n    };\n    _this.handleFormSubmit = _this.handleFormSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(TambahHasilLab, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      Appointment.getDetailPasien(this.props.match.params.id).then(function (response) {\n        console.warn(response);\n\n        if (response.status === 200) {\n          _this2.setState({\n            loading: false,\n            pasien: response.result\n          });\n        } else {\n          alert('Data tidak ditemukan');\n\n          _this2.props.history.push('/all-pasien');\n        }\n      });\n    }\n  }, {\n    key: \"handleFormSubmit\",\n    value: function handleFormSubmit(e) {\n      var _this3 = this;\n\n      e.preventDefault();\n      this.setState({\n        loading: true\n      });\n      var data = new FormData(e.target);\n      var dataJson = {};\n      data.forEach(function (val, key) {\n        if (val !== \"\") {\n          var name = key.split('.');\n\n          if (name.length > 1) {\n            var last = name.pop();\n            console.log(\"last == \".concat(last));\n            name.reduce(function (prev, next) {\n              console.log(\"prev[next] = \".concat(prev[next]));\n              console.log(\"prev[next] || {} = \".concat(prev[next] || {}));\n              return prev[next] = prev[next] || {};\n            }, dataJson)[last] = val;\n          } else {\n            dataJson[key] = val;\n          }\n        }\n      });\n      Appointment.tambahHasilLab(dataJson).then(function (response) {\n        if (response.status === 200) {\n          _this3.setState({\n            loading: false,\n            pasien: response.result\n          });\n\n          alert(\"Suskses tambah hasil lab pasien \".concat(_this3.state.pasien.nama));\n        } else {\n          _this3.setState({\n            loading: false\n          });\n\n          alert(\"Gagal tambah hasil lab pasien \".concat(_this3.state.pasien.nama));\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.loading) {\n        return React.createElement(Loading, {\n          msg: \"Fetching Data...\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79\n          },\n          __self: this\n        });\n      } else {\n        return React.createElement(FormTambahHasilLab, {\n          pasien: this.state.pasien,\n          onSubmit: this.handleFormSubmit,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83\n          },\n          __self: this\n        });\n      }\n    }\n  }]);\n\n  return TambahHasilLab;\n}(React.Component);","map":{"version":3,"sources":["/Users/rifkiachmads/Documents/kuliah/apap/tutorial10/src/screens/TambahHasilLab.jsx"],"names":["React","Loading","FormTambahHasilLab","Appointment","TambahHasilLab","props","state","loading","pasien","handleFormSubmit","bind","getDetailPasien","match","params","id","then","response","console","warn","status","setState","result","alert","history","push","e","preventDefault","data","FormData","target","dataJson","forEach","val","key","name","split","length","last","pop","log","reduce","prev","next","tambahHasilLab","nama","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Loading } from '../components/Loading';\nimport { FormTambahHasilLab } from '../containers/FormTambahHasilLab';\nimport { Appointment } from '../utils/Appointment';\n\n\nexport class TambahHasilLab extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tloading: true,\n\t\t\tpasien: {},\n\t\t}\n\t\tthis.handleFormSubmit = this.handleFormSubmit.bind(this)\n\t}\n\n\tcomponentDidMount() {\n\t\tAppointment.getDetailPasien(this.props.match.params.id).then( response => {\n\t\t\tconsole.warn(response);\n\t\t\tif (response.status === 200) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tloading: false,\n\t\t\t\t\tpasien: response.result,\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\talert('Data tidak ditemukan')\n\t\t\t\tthis.props.history.push('/all-pasien')\n\t\t\t}\n\t\t})\n\t}\n\n\thandleFormSubmit(e) {\n\t\te.preventDefault()\n\t\tthis.setState({\n\t\t\tloading: true\n\t\t})\n\n\t\tconst data = new FormData(e.target)\n\t\tconst dataJson = {}\n\n\t\tdata.forEach( (val, key) => {\n\t\t\tif (val !== \"\") {\n\t\t\t\tlet name = key.split('.');\n\t\t\t\tif (name.length > 1) {\n\t\t\t\t\tlet last = name.pop()\n\t\t\t\t\tconsole.log(`last == ${last}`)\n\t\t\t\t\tname.reduce( (prev, next) => {\n\t\t\t\t\t\tconsole.log(`prev[next] = ${prev[next]}`)\n\t\t\t\t\t\tconsole.log(`prev[next] || {} = ${prev[next] || {}}`)\n\t\t\t\t\t\treturn prev[next] = prev[next] || {};\n\t\t\t\t\t}, dataJson)[last] = val\n\n\t\t\t\t} else {\n\t\t\t\t\tdataJson[key] = val\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\n\t\tAppointment.tambahHasilLab(dataJson).then( response => {\n\t\t\tif (response.status === 200) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tloading: false,\n\t\t\t\t\tpasien: response.result\n\t\t\t\t})\n\t\t\t\talert(`Suskses tambah hasil lab pasien ${this.state.pasien.nama}`)\n\t\t\t} else {\n\t\t\t\tthis.setState({\n\t\t\t\t\tloading: false,\n\t\t\t\t})\n\t\t\t\talert(`Gagal tambah hasil lab pasien ${this.state.pasien.nama}`)\n\t\t\t}\n\t\t})\n\t}\n\n\trender() {\n\t\tif (this.state.loading) {\n\t\t\treturn (\n\t\t\t\t<Loading msg=\"Fetching Data...\" />\n\t\t\t)\n\t\t} else {\n\t\t\treturn (\n\t\t\t\t<FormTambahHasilLab pasien={this.state.pasien} onSubmit={this.handleFormSubmit} />\n\t\t\t)\n\t\t}\n\t}\n}"]},"metadata":{},"sourceType":"module"}