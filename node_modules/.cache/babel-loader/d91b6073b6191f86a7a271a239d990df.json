{"ast":null,"code":"import _classCallCheck from \"/Users/rifkiachmads/Documents/kuliah/apap/tutorial10/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/rifkiachmads/Documents/kuliah/apap/tutorial10/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/rifkiachmads/Documents/kuliah/apap/tutorial10/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/rifkiachmads/Documents/kuliah/apap/tutorial10/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/rifkiachmads/Documents/kuliah/apap/tutorial10/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/rifkiachmads/Documents/kuliah/apap/tutorial10/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/rifkiachmads/Documents/kuliah/apap/tutorial10/src/screens/UpdatePasien.jsx\";\nimport React from 'react';\nimport { Loading } from '../components/Loading';\nimport { FormUpdatePasien } from '../containers/FormUpdatePasien';\nimport { Appointment } from '../utils/Appointment';\nexport var UpdatePasien =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(UpdatePasien, _React$Component);\n\n  /** \n   * TODO: Akses method getDetailPasien(idPasien) pada Appointment dan lakukan update state. \n   * TODO: Lakukan pemanggilan pada constructor() atau pada lifecycle componentDidMount()\n   */\n  function UpdatePasien(props) {\n    var _this;\n\n    _classCallCheck(this, UpdatePasien);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(UpdatePasien).call(this, props));\n    _this.state = {\n      loading: true,\n      pasien: {}\n    };\n    _this.handleFormSubmit = _this.handleFormSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(UpdatePasien, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      Appointment.getDetailPasien(this.props.match.params.id).then(function (response) {\n        if (response.status === 200) {\n          _this2.setState({\n            loading: false,\n            pasien: response.result\n          });\n        } else {\n          alert('Data tidak ditemukan');\n\n          _this2.props.history.push(-1);\n        }\n      });\n    }\n  }, {\n    key: \"handleFormSubmit\",\n    value: function handleFormSubmit(e) {\n      var _this3 = this;\n\n      e.preventDefault();\n      this.setState({\n        loading: true\n      });\n      var data = new FormData(e.target);\n      var dataJson = {};\n      data.forEach(function (val, key) {\n        if (val !== \"\") {\n          var name = key.split('.');\n\n          if (name.length > 1) {\n            var last = name.pop();\n            name.reduce(function (prev, next) {\n              return prev[next] = prev[next] || {};\n            }, dataJson)[last] = val;\n          } else {\n            dataJson[key] = val;\n          }\n        }\n      });\n      Appointment.updateStatusPasien(dataJson).then(function (response) {\n        if (response.status === 200) {\n          _this3.setState({\n            loading: false,\n            pasien: response.result\n          });\n\n          alert(\"Suskses update pasien \".concat(_this3.state.pasien.nama));\n        } else {\n          _this3.setState({\n            loading: false\n          });\n\n          alert(\"Gagal update pasien \".concat(_this3.state.pasien.nama));\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.loading) {\n        return React.createElement(Loading, {\n          msg: \"Fetching Data...\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78\n          },\n          __self: this\n        });\n      } else {\n        return React.createElement(FormUpdatePasien, {\n          pasien: this.state.pasien,\n          onSubmit: this.handleFormSubmit,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        });\n      }\n    }\n  }]);\n\n  return UpdatePasien;\n}(React.Component);","map":{"version":3,"sources":["/Users/rifkiachmads/Documents/kuliah/apap/tutorial10/src/screens/UpdatePasien.jsx"],"names":["React","Loading","FormUpdatePasien","Appointment","UpdatePasien","props","state","loading","pasien","handleFormSubmit","bind","getDetailPasien","match","params","id","then","response","status","setState","result","alert","history","push","e","preventDefault","data","FormData","target","dataJson","forEach","val","key","name","split","length","last","pop","reduce","prev","next","updateStatusPasien","nama","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Loading } from '../components/Loading';\nimport { FormUpdatePasien } from '../containers/FormUpdatePasien';\nimport { Appointment } from '../utils/Appointment';\n\n\nexport class UpdatePasien extends React.Component {\n\t/** \n\t * TODO: Akses method getDetailPasien(idPasien) pada Appointment dan lakukan update state. \n\t * TODO: Lakukan pemanggilan pada constructor() atau pada lifecycle componentDidMount()\n\t */\n\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tloading: true,\n\t\t\tpasien: {},\n\t\t}\n\t\tthis.handleFormSubmit = this.handleFormSubmit.bind(this)\n\t}\n\n\tcomponentDidMount() {\n\t\tAppointment.getDetailPasien(this.props.match.params.id).then( response => {\n\t\t\tif (response.status === 200) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tloading: false,\n\t\t\t\t\tpasien: response.result,\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\talert('Data tidak ditemukan')\n\t\t\t\tthis.props.history.push(-1)\n\t\t\t}\n\t\t})\n\t}\n\n\thandleFormSubmit(e) {\n\t\te.preventDefault()\n\t\tthis.setState({\n\t\t\tloading: true\n\t\t})\n\n\t\tconst data = new FormData(e.target)\n\t\tconst dataJson = {}\n\n\t\tdata.forEach( (val, key) => {\n\t\t\tif (val !== \"\") {\n\t\t\t\tlet name = key.split('.');\n\t\t\t\tif (name.length > 1) {\n\t\t\t\t\tlet last = name.pop()\n\t\t\t\t\tname.reduce( (prev, next) => {\n\t\t\t\t\t\treturn prev[next] = prev[next] || {};\n\t\t\t\t\t}, dataJson)[last] = val\n\t\t\t\t} else {\n\t\t\t\t\tdataJson[key] = val\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\n\t\tAppointment.updateStatusPasien(dataJson).then( response => {\n\t\t\tif (response.status === 200) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tloading: false,\n\t\t\t\t\tpasien: response.result\n\t\t\t\t})\n\t\t\t\talert(`Suskses update pasien ${this.state.pasien.nama}`)\n\t\t\t} else {\n\t\t\t\tthis.setState({\n\t\t\t\t\tloading: false,\n\t\t\t\t})\n\t\t\t\talert(`Gagal update pasien ${this.state.pasien.nama}`)\n\t\t\t}\n\t\t})\n\t}\n\n\trender() {\n\t\tif (this.state.loading) {\n\t\t\treturn (\n\t\t\t\t<Loading msg=\"Fetching Data...\" />\n\t\t\t)\n\t\t} else {\n\t\t\treturn (\n\t\t\t\t<FormUpdatePasien pasien={this.state.pasien} onSubmit={this.handleFormSubmit} />\n\t\t\t)\n\t\t}\n\t}\n}"]},"metadata":{},"sourceType":"module"}